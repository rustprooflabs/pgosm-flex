<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Running on Windows - PgOSM Flex User Guide</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="PgOSM Flex provides high quality OpenStreetMap datasets in PostGIS using the osm2pgsql Flex output">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">About PgOSM Flex</a></li><li class="chapter-item expanded affix "><a href="code-of-conduct.html">Code of Conduct</a></li><li class="chapter-item expanded affix "><a href="contributing.html">Contributing to PgOSM Flex</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="quick-start.html"><strong aria-hidden="true">1.</strong> Quick Start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="windows.html" class="active"><strong aria-hidden="true">1.1.</strong> Running on Windows</a></li></ol></li><li class="chapter-item expanded "><a href="customizations.html"><strong aria-hidden="true">2.</strong> Customize PgOSM Flex</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="common-customization.html"><strong aria-hidden="true">2.1.</strong> Common Customizations</a></li><li class="chapter-item expanded "><a href="layersets.html"><strong aria-hidden="true">2.2.</strong> Layersets</a></li><li class="chapter-item expanded "><a href="custom-indexes.html"><strong aria-hidden="true">2.3.</strong> Indexes</a></li><li class="chapter-item expanded "><a href="configure-postgres.html"><strong aria-hidden="true">2.4.</strong> Configure Postgres</a></li><li class="chapter-item expanded "><a href="data-files.html"><strong aria-hidden="true">2.5.</strong> Data Files</a></li></ol></li><li class="chapter-item expanded "><a href="query.html"><strong aria-hidden="true">3.</strong> Query examples</a></li><li class="chapter-item expanded "><a href="routing.html"><strong aria-hidden="true">4.</strong> Routing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="routing-road.html"><strong aria-hidden="true">4.1.</strong> Routing Roads</a></li><li class="chapter-item expanded "><a href="routing-water.html"><strong aria-hidden="true">4.2.</strong> Routing Water</a></li><li class="chapter-item expanded "><a href="routing-process.html"><strong aria-hidden="true">4.3.</strong> Routing Process</a></li><li class="chapter-item expanded "><a href="routing-3.html"><strong aria-hidden="true">4.4.</strong> Routing Roads: Legacy (pgRouting 3)</a></li></ol></li><li class="chapter-item expanded "><a href="performance.html"><strong aria-hidden="true">5.</strong> Processing Time</a></li><li class="chapter-item expanded affix "><li class="part-title">Production Use</li><li class="chapter-item expanded "><a href="postgres-permissions.html"><strong aria-hidden="true">6.</strong> Postgres Permissions</a></li><li class="chapter-item expanded "><a href="postgres-external.html"><strong aria-hidden="true">7.</strong> Using External Postgres Connection</a></li><li class="chapter-item expanded "><a href="data-updates.html"><strong aria-hidden="true">8.</strong> Data updates</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="replication.html"><strong aria-hidden="true">8.1.</strong> Using Replication</a></li><li class="chapter-item expanded "><a href="relocate-data.html"><strong aria-hidden="true">8.2.</strong> Relocate Data</a></li><li class="chapter-item expanded "><a href="update-mode.html"><strong aria-hidden="true">8.3.</strong> Using Update Mode</a></li></ol></li><li class="chapter-item expanded "><a href="qgis-styles.html"><strong aria-hidden="true">9.</strong> QGIS Styles</a></li><li class="chapter-item expanded affix "><li class="part-title">Developers</li><li class="chapter-item expanded "><a href="force-load.html"><strong aria-hidden="true">10.</strong> Force Load</a></li><li class="chapter-item expanded "><a href="projects.html"><strong aria-hidden="true">11.</strong> Projects using PgOSM Flex</a></li><li class="chapter-item expanded "><a href="docker-build.html"><strong aria-hidden="true">12.</strong> Build and Push Docker Images</a></li><li class="chapter-item expanded "><a href="tests.html"><strong aria-hidden="true">13.</strong> Testing PgOSM Flex</a></li><li class="chapter-item expanded "><a href="qgis-styles-dev.html"><strong aria-hidden="true">14.</strong> Developing QGIS Styles</a></li><li class="chapter-item expanded "><a href="troubleshooting.html"><strong aria-hidden="true">15.</strong> Troubleshoot errors in osm2pgsql processing</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">PgOSM Flex User Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rustprooflabs/pgosm-flex" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rustprooflabs/pgosm-flex/edit/main/docs/src/windows.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pgosm-flex-on-windows"><a class="header" href="#pgosm-flex-on-windows">PgOSM Flex on Windows</a></h1>
<p>PgOSM Flex can be used on Windows via Docker Desktop.
This page outlines a few Windows-specific steps where they deviate from the experience
on Linux.</p>
<h2 id="install-docker-desktop"><a class="header" href="#install-docker-desktop">Install Docker Desktop</a></h2>
<p>The Docker documentation <a href="https://docs.docker.com/desktop/install/windows-install/">has instructions</a>
to install Docker Desktop on Windows.  There is a link toward the top of that page to download
the latest installer.
The installation steps are under the
<a href="https://docs.docker.com/desktop/install/windows-install/#install-docker-desktop-on-windows">Install Docker Desktop on Windows</a> section, with both interactive and
command line instructions.</p>
<blockquote>
<p>Note: If your Windows user is NOT the admin, you must also follow the steps
to add your user to the <code>docker-users</code> user group. Those steps are listed
after the main installation steps.</p>
</blockquote>
<h2 id="create-folder"><a class="header" href="#create-folder">Create Folder</a></h2>
<p>Create a <code>pgosm-data</code> folder under your user's Documents folder. This gives PgOSM Flex
a place to save files that you can access directly from your host Windows machine.</p>
<p>The following screenshot shows this folder with the <code>.pbf</code> and <code>.md5</code> files downloaded
to load Hawaii from 2024-02-15.</p>
<p><img src="/static/windows-docker-desktop-pgosm-data-folder.png" alt="Screenshot showing the Documents &gt; pgosm-data folder on Windows with the PBF and .md5 files from Hawaii" /></p>
<h2 id="download-pgosm-flex-image"><a class="header" href="#download-pgosm-flex-image">Download PgOSM Flex Image</a></h2>
<p>Search for the <code>rustprooflabs/pgosm-flex</code> Docker image via Docker Desktop.
Leave the &quot;Latest&quot; tag selected and click &quot;Pull&quot; to download the image.</p>
<p><img src="/static/windows-docker-desktop-download-image.png" alt="Screenshot showing the Image Search for pgosm-flex from Docker Hub" /></p>
<h2 id="run-docker-container"><a class="header" href="#run-docker-container">Run Docker Container</a></h2>
<p>The Images section of Docker Desktop lists the images available on your computer.
Click the Run button (play icon) on the right side of the line listing the PgOSM Flex
image.</p>
<p><img src="/static/windows-docker-desktop-run-container.png" alt="Screenshot showing the Run button from the page listing downloaded images." /></p>
<p>Expand the &quot;Optional Settings&quot; dialog on the Run dialog to enter details to run.
Setting the port to 5433 makes the in-Docker Postgres available to connect to from
your host machine. 
The Volumes setting maps your load <code>pgosm-data</code> dirctory (under Documents) to
the Docker container's <code>/app/output</code> directory to make files used available.
The Environment Variables configure the internal database's superuser and password.
<strong>DO NOT USE THE PASSWORD SHOWN HERE!</strong></p>
<p><img src="/static/windows-docker-desktop-run-container-optional-settings.png" alt="Screenshot showing the optional settings filled in on the Run dialog from Docker Desktop on Windows." /></p>
<blockquote>
<p>Note: These Windows instructions explain the basic Environment Variables matching
the ones used in the main <a href="/quick-start.html">Quick Start</a> guide.  There are not
equivalent Windows pages for all of the advanced customizations available.
For these options, review the main instructions for the command line usage
and convert them to the Docker Desktop equivalents.</p>
</blockquote>
<p>When running the container you might be prompted by Windows Defender about Docker Desktop
and the firewall.  Most users should click Cancel on this step. You do not need to &quot;Allow access&quot;
in order to connect to your Docker container from the computer running Docker.</p>
<blockquote>
<p>You should understand the risks of opening up the Postgres port in your firewall.  This topic is beyond the scope of this documentation.</p>
</blockquote>
<p><img src="/static/windows-docker-desktop-run-container-firewall.png" alt="Screenshot showing the Windows Defender dialog asking about opening ports in the Firewall, which requires Admin permissions.  Most users will click cancel." /></p>
<p>The &quot;Logs&quot; tab for the new running container should display the output from the backend
starting up. The final line from starting up should read
&quot;<code>database system is ready to accept connections</code>.&quot;  At this point the internal
Postgres service is running and ready.</p>
<p><img src="/static/windows-docker-desktop-run-container-logs.png" alt="Screenshot showing the log output automatically displayed when running the PgOSM Flex Docker container." /></p>
<h2 id="docker-exec"><a class="header" href="#docker-exec">Docker exec</a></h2>
<p>Switch to the &quot;Exec&quot; tab of the running pgosm container.  This interface allows
running commands inside the Docker container.  This provides the <code>docker exec -it pgosm</code>
functionality used on the command line elsewhere throughout this documentation.</p>
<p><img src="/static/windows-docker-desktop-pgosm-exec-ready.png" alt="Screenshot showing the &quot;exec&quot; tab ready for a command to run" /></p>
<p>Enter the command to run in the container. </p>
<pre><code class="language-bash">python3 docker/pgosm_flex.py --ram=2 --region=north-america/us --subregion=hawaii
</code></pre>
<p>The following screenshot shows this command being ran and the initial portion of
the output from processing.</p>
<p><img src="/static/windows-docker-desktop-pgosm-exec.png" alt="Screenshot showing the &quot;exec&quot; tab in the running Docker container." /></p>
<blockquote>
<p>Docker Desktop handles the <code>exec</code> functionality.  Commands ran via Docker Desktop
exclude the <code>docker exec -it pgosm</code> seen throughout the remainder of this documentation.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="quick-start.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="customizations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="quick-start.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="customizations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
